---
title: "Dengue Situation in Bangladesh"
output: 
  flexdashboard::flex_dashboard:
    orientation: rows
    social: menu
    source_code: https://github.com/hossainlab/dengue-situation-dashboar
editor_options: 
  chunk_output_type: console
---

```{r setup, include=FALSE, warning=FALSE, message=FALSE}
# dashboard 
library(flexdashboard)
library(tidyverse)
library(readxl)
library(sjPlot)
library(viridis)
library(rio)
library(viridis)
library(denguedatahub)
library(visdat)

# Maps and Plots
library(plotly)
library(leaflet)
library(leafpop)
library(RColorBrewer)

# Dates
library(lubridate) 

## For displaying tables
library(DT)
library(readxl)

theme_set(theme_classic())
```


```{r, colors, include=FALSE}
confirmed_color <- "#FF5733"
active_color <- "#FFD700"
recovered_color <- "#00FF00"
death_color <- "#333333"
```


```{r, load-data}
# cases data 
dengue_cases <- read_excel(here::here("data/DengueCaseReporting[2012-23].xlsx"),sheet = 1)
dengue_cases <- dengue_cases |> mutate(Months = factor(Months, levels = month.name)) 



# deaths data 
dengue_deaths <- read_excel(here::here("data/DengueCaseReporting[2012-23].xlsx"),sheet = 2)
dengue_deaths <- dengue_deaths |> mutate(Months = factor(Months, levels = month.name)) 

# daily data 
daily_data_23 <- import_list(here::here("data/DengueCases2023.xlsx"),
                      setclass = "data.table", 
                      rbind_label = "file", 
                      rbind = TRUE)

daily_data_23$Date <- as.Date(daily_data_23$Date)
```

```{r, data-preprocessing}
# transform data into long format for visualizations 
# cases 
long_cases_data <- dengue_cases |> 
  pivot_longer(cols = 2:13, names_to = "Year", values_to = "Cases") |> 
  mutate(Months = factor(Months, levels = month.name)) 

# deaths 
long_deaths_data <- dengue_deaths |> 
  pivot_longer(cols = 2:10, names_to = "Year", values_to = "Deaths") |> 
  mutate(Months = factor(Months, levels = month.name)) 


# join data 
all_years <- left_join(long_cases_data, long_deaths_data, 
                    by = c("Months", "Year"))

all_years$Year <- as.factor(all_years$Year)

# Monthly dengue cases for 2023 
long_cases_data_23 <- long_cases_data|> 
  filter(Year == 2023)

long_deaths_data_23 <- long_deaths_data|> 
  filter(Year == 2023)

# join data 
data23 <- left_join(long_cases_data_23, long_deaths_data_23, 
                    by = c("Months", "Year"))
```

Overview  
===================================================================

Row
-------------------------------------------------------------------
### Confirmed Cases {.value-box}

```{r}
confirmed <- format(sum(daily_data_23$Cases, na.rm = T), big.mark = ",")
valueBox(value = confirmed, 
         caption = "Total Confirmed Cases in 2023", 
         color = confirmed_color, 
         icon = "fa-virus")
```


### Confirmed Deaths {.value-box}
```{r}
deaths <- format(sum(daily_data_23$Deaths, na.rm = T), big.mark = ",")
valueBox(value = deaths, 
         caption = "Total Death Cases in 2023", 
         color = death_color, 
         icon = "fa-exclamation-triangle")
```


### Recovered Cases {.value-box}
```{r}
recovered <- format(sum(daily_data_23$Recovered, na.rm = T), big.mark = ",")
valueBox(value = recovered, 
         caption = "Total Recovered Cases in 2023", 
         color = recovered_color, 
         icon = "fa-check-circle")
```


### Active Cases {.value-box}
```{r}
daily_data_23$Active <- daily_data_23$Cases - daily_data_23$Deaths - daily_data_23$Recovered
active <- format(sum(daily_data_23$Active, na.rm = T), big.mark = ",")
valueBox(value = active, 
         caption = "Total Active Cases in 2023", 
         color = active_color, 
         icon = "fa-skull")
```


Row
-----------------------------------------------------------------------
### Daily Confirmed, Death, and Recovered Cases Over Time in 2023
```{r}
# Viz 1: Daily Confirmed, Death, and Recovered Cases Over Time in 2023
plot_ly(data = daily_data_23, x = ~Date, type = 'scatter', mode = 'lines+markers', 
        name = 'Cases', y = ~Cases) %>%
  add_trace(y = ~Deaths, name = 'Deaths', line = list(color="black")) %>%
  add_trace(y = ~Recovered, name = 'Recovered') %>%
  layout(xaxis = list(title = 'Date'),
         yaxis = list(title = 'Count'), 
         legend = list(orientation = "h", 
                       xanchor = "center", 
                       x = 0.5, 
                       y= 1))
```

### Number of Dengue Cases in 2023

```{r}
# Viz 2: Number of Dengue Cases in 2023
plot_ly(data = data23, x = ~Months)  |> 
  add_bars(y = ~Cases, name = 'Confirmed Cases') |> 
  add_trace(y = ~Cases, type = 'scatter', mode = 'lines+markers', name = "Trends") |> 
  layout(xaxis = list(title = 'Month'),
         yaxis = list(title = 'Number of Confirmed Cases'), 
         legend = list(orientation = "h", 
                       xanchor = "center", 
                       x = 0.5, 
                       y= 1))
```


### Number of Death Cases in 2023
```{r}
# Viz 3: Number of Death Cases in 2023
plot_ly(data = data23, x = ~Months) |> 
  add_bars(y = ~Deaths, name = 'Confirmed Deaths', marker = list(color = 'black')) |> 
  add_trace(y = ~Deaths, type = 'scatter', mode = 'lines+markers', name = "Trends") |> 
  layout(xaxis = list(title = 'Month'),
         yaxis = list(title = 'Number of Death Cases'), 
         legend = list(orientation = "h", 
                       xanchor = "center", 
                       x = 0.5, 
                       y= 1))
```


Row
-----------------------------------------------------------------------
### Number of Confirmed Dengue Cases by Month [2012-2023]

```{r}

# Viz 4: Number of Confirmed Dengue Cases by Month [2012-2023]
plot_ly(data = dengue_cases, x = ~Months)  |> 
  add_bars(y = ~`2012`, name = '2012') |>
  add_bars(y = ~`2013`, name = '2013') |>
  add_bars(y = ~`2014`, name = '2014') |>
  add_bars(y = ~`2015`, name = '2015') |>
  add_bars(y = ~`2016`, name = '2016') |>
  add_bars(y = ~`2017`, name = '2017') |>
  add_bars(y = ~`2018`, name = '2018') |>
  add_bars(y = ~`2019`, name = '2019') |>
  add_bars(y = ~`2020`, name = '2020') |>
  add_bars(y = ~`2021`, name = '2021') |>
  add_bars(y = ~`2022`, name = '2022') |>
  add_bars(y = ~`2023`, name = '2023') |>
  layout(xaxis = list(title = 'Month'),
         yaxis = list(title = 'Number of Confirmed Cases'), 
         legend = list(orientation = "h", 
                       xanchor = "center", 
                       x = 0.5, 
                       y= 1))
```

### Number of Dengue Death Cases by Month [2015-2023]
```{r}

# Viz 5: Number of Dengue Death Cases by Month [2015-2023]
plot_ly(data = dengue_deaths, x = ~Months)  |> 
  add_bars(y = ~`2015`, name = '2015') |>
  add_bars(y = ~`2016`, name = '2016') |>
  add_bars(y = ~`2017`, name = '2017') |>
  add_bars(y = ~`2018`, name = '2018') |>
  add_bars(y = ~`2019`, name = '2019') |>
  add_bars(y = ~`2020`, name = '2020') |>
  add_bars(y = ~`2021`, name = '2021') |>
  add_bars(y = ~`2022`, name = '2022') |>
  add_bars(y = ~`2023`, name = '2023') |>
  layout(xaxis = list(title = 'Month'),
         yaxis = list(title = 'Number of Death Cases'), 
         legend = list(orientation = "h", 
                       xanchor = "center", 
                       x = 0.5, 
                       y= 1))
```


### Number of Confirmed and Deaths Cases by Year [2012-2023]

```{r}
# Viz 6: Number of Confirmed and Deaths Cases by Year [2012-2023]
plot_ly(data = all_years, x = ~Year) %>%
  add_bars(y = ~Cases, name = 'Cases') |> 
  add_bars(y = ~Deaths, name = 'Deaths') |> 
  layout(xaxis = list(title = 'Year'),
         yaxis = list(title = 'Cases'), 
         legend = list(orientation = "h", 
                       xanchor = "center", 
                       x = 0.5, 
                       y= 1))
```


Top 3 - Outbreaks 
===================================================================

Row
-------------------------------------------------------------------
### Last Three Years Denge Cases by Month

```{r}
last3 <- long_cases_data %>% 
  filter(Year == c(2021, 2022, 2023))

fig_cases_month <- ggplot(data = last3, 
               aes(x = Months, y = Cases, group=Year, color=Year))+
  geom_line()+
  theme_minimal()+ 
  theme(axis.text.x = element_text(angle = 60, vjust = 0.5, hjust=1))
ggplotly(fig_cases_month)
```


### Last Three Years Denge Cases by Year [2021-2023]

```{r}
last3_sum_df <- long_cases_data %>% 
  filter(Year == c(2021, 2022, 2023)) %>% 
  group_by(Year) %>% 
  summarise(TotalCases = sum(Cases))

fig_cases_year <- ggplot(data = last3_sum_df, aes(x = Year, y=TotalCases))+
  geom_bar(stat="identity", fill="#d45087")+
  theme_minimal()+
  theme(axis.text.x = element_text(angle = 60, vjust = 0.5, hjust=1))
ggplotly(fig_cases_year)
```


Row
-------------------------------------------------------------------
### Last Three Years Denge Deaths by Month

```{r}
last3<- long_deaths_data %>% 
  filter(Year == c(2021, 2022, 2023))

fig_deaths_month <- ggplot(data = last3, 
               aes(x = Months, y = Deaths, group=Year, color=Year))+
  geom_line()+
  theme_minimal()+ 
  theme(axis.text.x = element_text(angle = 60, vjust = 0.5, hjust=1))
ggplotly(fig_deaths_month)
```


### Last Three Years Denge Deaths by Year [2021-2023]

```{r}
last3_sum_df <- long_deaths_data %>% 
  filter(Year == c(2021, 2022, 2023)) %>% 
  group_by(Year) %>% 
  summarise(TotalDeaths = sum(Deaths)) 

fig_last3_deaths <- ggplot(data = last3_sum_df, aes(x = Year, y=TotalDeaths))+
  geom_bar(stat="identity", fill="#a05195")+
  theme_minimal()+
  theme(axis.text.x = element_text(angle = 60, vjust = 0.5, hjust=1))
ggplotly(fig_last3_deaths)
```

Global Situation
===================================================================

Dengue - Climate Change 
===================================================================


Data
===================================================================
**Data**

The Dengue Situation Dashboard utilizes data from the official website of the [Directorate General of Health Services (DGHS)](https://old.dghs.gov.bd/index.php/bd/home/5200-daily-dengue-status-report) in Bangladesh, specifically the Daily Dengue Status Report. Developed using the flexdashboard framework, this dashboard provides valuable insights and real-time information about the dengue situation in Bangladesh.

The dashboard presents a user-friendly interface that allows users to access and visualize the latest data related to dengue cases, deaths, and affected areas in the country. By incorporating the data from the DGHS, the dashboard ensures the reliability and accuracy of the information presented.

Through interactive charts, graphs, and maps, the dashboard highlights key statistics, trends, and patterns related to dengue cases. Users can explore the data by region, district, or specific time periods, gaining a comprehensive understanding of the dengue situation at various levels.

The dashboard offers a range of visualizations, including line charts displaying the daily or weekly trend of dengue cases, bar charts showcasing the distribution of cases across different districts, and choropleth maps indicating the severity of dengue outbreaks in different regions of Bangladesh. These visual representations help stakeholders and decision-makers to identify high-risk areas, monitor the progression of the disease, and allocate resources effectively.


Furthermore, the Dengue Situation Dashboard allows users to compare current data with historical data, enabling them to assess the impact of control measures and interventions. This feature assists in evaluating the effectiveness of strategies implemented to mitigate the dengue outbreak.

By providing real-time updates and an intuitive interface, the Dengue Situation Dashboard based on the DGHS data ensures that stakeholders, including health officials, researchers, and the public, have access to reliable and up-to-date information. This empowers them to make informed decisions, implement targeted interventions, and raise awareness about dengue prevention and control measures.

Overall, the Dengue Situation Dashboard based on the DGHS data and developed using flexdashboard is a valuable tool that enhances the understanding of the dengue situation in Bangladesh. By leveraging the power of data visualization and real-time information, this dashboard supports evidence-based decision-making and facilitates effective response measures to combat dengue outbreaks in the country.


Dengue - Bangladesh
=======================================================================
**Outbreak at a glance** 

As of 20 November 2022, a total of 52 807 laboratory-confirmed dengue cases and 230 related deaths have been reported by the Ministry of Health & Family Welfare of Bangladesh since 1 January 2022 with a case fatality rate (CFR) of 0.44%. Dengue is endemic in Bangladesh however a surge of cases started in June 2022. Currently, all eight divisions in the country are reporting cases and deaths. This is the second-largest outbreak since 2000, with the largest having occurred in 2019. The current dengue outbreak is unusual in its scale and seasonality.

**Description of the outbreak**

Between 1 January and 20 November 2022, a total of 52 807 dengue cases including 230 related deaths (case fatality rate = 0.44%) were reported by the Ministry of Health & Family Welfare (MOHFW) (Figure 1). The cases were confirmed either by non-structural protein (NS1) diagnostic kits or by Immunoglobulin M (IgM) tests. According to information available for 40% of reported cases (n=20 982) the median age is 25 years (range: 0 – 89) with males accounting for 60% of the cases. This is the second highest annual number of cases since 2000, the highest having occurred in 2019, when 101 354 cases including 164 deaths were reported (Figure 2 & 3).

The most affected division is Dhaka, accounting for 70.6% of cases and 60.4% of deaths. Dhaka city, the largest city in Bangladesh, located in Dhaka division, has reported 64.5% (n= 34 071) of the total number of cases. Other affected divisions include Chattogram division (13.2% of cases and 24.8% of deaths) and Khulna division (5.5% of cases and 4.8% of deaths) (Figure 4).

The high incidence of dengue cases this year is taking place in the context of an unusual amount of rainfall since June 2022, accompanied by high temperatures and high humidity which have resulted in an increased mosquito population throughout Bangladesh.

Source: https://www.who.int/emergencies/disease-outbreak-news/item/2022-DON424



About  
=======================================================================
**Author**

[Md. Jubayer Hossain](https://hossainlab.github.io/) is the Founder, Management Lead and Data Analyst at CHIRAL Bangladesh. CHIRAL Bangladesh is a non-profit organization dedicated to health research to improve lives in Bangladesh. He aspires to maximize the quality of life of people around him by working at the intersection of education, technology, and health research. His research interests include public health, health data science, remote sensing, GIS applications in health,  and machine learning in healthcare. He has been teaching programming, data analysis, data science, and research methodology since 2020 in CHIRAL Bangladesh. Detailed research and teaching activities were found on his [website.](https://hossainlab.github.io/)  




