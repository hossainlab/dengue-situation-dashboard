---
title: "Dengue Situation Dashboard"
author: "Md. Jubayer Hossain"
output: 
  flexdashboard::flex_dashboard:
    theme: flatly
    orientation: rows
    social: menu
    source_code: https://github.com/hossainlab/monkeypox
---

```{r setup, include=FALSE}
library(flexdashboard)
library(tidyverse)
library(highcharter)
library(gt)
library(htmltools)
library(viridis)
library(echarts4r)

## Data cleaning 
library(data.table)
library(dplyr)
library(tidyr)
library(magrittr)
library(purrr)
library(forcats)
library(purrr)

## printing 
library(glue)

## Maps and Plots
library(plotly)
library(leaflet)
library(leafpop)
library(RColorBrewer)

# Dates
library(lubridate) 

## For displaying tables
library(DT)
library(readxl)

theme_set(theme_classic())
```



```{r, colors, include=FALSE}
confirmed_color <- "lightsteelblue"
active_color <- "orange"
new_deaths_color <- "limegreen"
death_color <- "red"
```



```{r, cases-all, include=FALSE}
# read dengue cases data from 2012 to 2023  
all_cases_data <- read_excel("DengueCaseReporting[2012-23].xlsx", sheet = 1)

# transform data 
long_cases_data <- all_cases_data %>% 
  pivot_longer(cols = 2:13, names_to = "Year", values_to = "Cases") %>% 
  mutate(Months = factor(Months, levels = month.name))

long_cases_data$Year <- as.factor(long_cases_data$Year )
```

```{r, deaths-all, include=FALSE}
# read dengue deaths cases data from 2015 to 2023  
all_deaths_data <- read_excel("DengueCaseReporting[2012-23].xlsx", sheet = 2)

# transform data 
long_deaths_data <- all_deaths_data %>% 
  pivot_longer(cols = 2:10, names_to = "Year", values_to = "Death Cases") %>% 
  mutate(Months = factor(Months, levels = month.name))
long_deaths_data$Year <- as.factor(long_deaths_data$Year)
```

```{r, data-import, include=FALSE}
# read multiple sheets
data23 <- bind_rows("DengueCases2023.xlsx" %>%
                     excel_sheets() %>%
                     purrr::set_names()%>%
                     map(read_excel, path = "DengueCases2023.xlsx"))

data23$Date <- as.Date(data23$Date)
```


Overview  
=======================================================================

Row
-----------------------------------------------------------------------

### Confirmed Cases {.value-box}

```{r}
confirmed <- format(sum(data23$`Confirmed Cases`, na.rm = T), big.mark = ",")
valueBox(value = confirmed, 
         caption = "Total Confirmed Cases", 
         color = confirmed_color)
```


### Confirmed Deaths {.value-box}
```{r}
deaths <- format(sum(data23$`Confirmed Deaths`, na.rm = T), big.mark = ",")
valueBox(value = deaths, 
         caption = "Total Deaths", 
         color = death_color)
```


Row
-----------------------------------------------------------------------
### Number of Confirmed Dengue Cases [2023]
```{r}
fig1 <- plot_ly(data23, x = ~Date, y = ~`Confirmed Cases`, name = 'Confirmed Cases', type = 'scatter', mode = 'lines') 

fig1 <- fig1 %>% 
  add_trace(y = ~`Confirmed Deaths`, name = 'Confirmed Deaths',type = 'scatter', mode = 'lines') 

fig1
```

### Number of Dengue Cases by Year [2012-2023]

```{r}
fig2 <- ggplot(data = long_cases_data, aes(x = Year, y = Cases))+
  geom_bar(stat="identity", fill="#003f5c")+
  theme_minimal()+
  theme(axis.text.x = element_text(angle = 60, vjust = 0.5, hjust=1))
ggplotly(fig2)
```


Row
-----------------------------------------------------------------------

### Number of Confirmed Dengue Cases [2012-2023]

```{r}
fig3 <- ggplot(data = long_cases_data, 
               aes(x = Months, y = Cases, group=Year, color=Year))+
  geom_line()+
  theme_minimal()+ 
  theme(axis.text.x = element_text(angle = 60, vjust = 0.5, hjust=1))
ggplotly(fig3)
```


### Number of Dengue Deaths Cases by Year [2015-2023]

```{r}
fig4 <- ggplot(data = long_deaths_data, aes(x = Year, y = `Death Cases`))+
  geom_bar(stat="identity", fill="#a05195")+
  theme_minimal()+
  theme(axis.text.x = element_text(angle = 60, vjust = 0.5, hjust=1))
ggplotly(fig4)
```



Data
=======================================================================
**Data**

The Dengue Situation Dashboard utilizes data from the official website of the [Directorate General of Health Services (DGHS)](https://old.dghs.gov.bd/index.php/bd/home/5200-daily-dengue-status-report) in Bangladesh, specifically the Daily Dengue Status Report. Developed using the flexdashboard framework, this dashboard provides valuable insights and real-time information about the dengue situation in Bangladesh.

The dashboard presents a user-friendly interface that allows users to access and visualize the latest data related to dengue cases, deaths, and affected areas in the country. By incorporating the data from the DGHS, the dashboard ensures the reliability and accuracy of the information presented.

Through interactive charts, graphs, and maps, the dashboard highlights key statistics, trends, and patterns related to dengue cases. Users can explore the data by region, district, or specific time periods, gaining a comprehensive understanding of the dengue situation at various levels.

The dashboard offers a range of visualizations, including line charts displaying the daily or weekly trend of dengue cases, bar charts showcasing the distribution of cases across different districts, and choropleth maps indicating the severity of dengue outbreaks in different regions of Bangladesh. These visual representations help stakeholders and decision-makers to identify high-risk areas, monitor the progression of the disease, and allocate resources effectively.


Furthermore, the Dengue Situation Dashboard allows users to compare current data with historical data, enabling them to assess the impact of control measures and interventions. This feature assists in evaluating the effectiveness of strategies implemented to mitigate the dengue outbreak.

By providing real-time updates and an intuitive interface, the Dengue Situation Dashboard based on the DGHS data ensures that stakeholders, including health officials, researchers, and the public, have access to reliable and up-to-date information. This empowers them to make informed decisions, implement targeted interventions, and raise awareness about dengue prevention and control measures.

Overall, the Dengue Situation Dashboard based on the DGHS data and developed using flexdashboard is a valuable tool that enhances the understanding of the dengue situation in Bangladesh. By leveraging the power of data visualization and real-time information, this dashboard supports evidence-based decision-making and facilitates effective response measures to combat dengue outbreaks in the country.


Summary  
=======================================================================

### Last Three Years Cases

```{r}
last3<- long_cases_data %>% 
  filter(Year == c(2021, 2022, 2023))

fig2 <- ggplot(data = last3, 
               aes(x = Months, y = Cases, group=Year, color=Year))+
  geom_line()+
  theme_minimal()+ 
  theme(axis.text.x = element_text(angle = 60, vjust = 0.5, hjust=1))
ggplotly(fig2)
```


About  
=======================================================================
**Author**

[Md. Jubayer Hossain](https://hossainlab.github.io/) is the Founder, Management Lead and Data Analyst at CHIRAL Bangladesh. CHIRAL Bangladesh is a non-profit organization dedicated to health research to improve lives in Bangladesh. He aspires to maximize the quality of life of people around him by working at the intersection of education, technology, and health research. His research interests include public health, health data science, remote sensing, GIS applications in health,  and machine learning in healthcare. He has been teaching programming, data analysis, data science, and research methodology since 2020 in CHIRAL Bangladesh. Detailed research and teaching activities were found on his [website.](https://hossainlab.github.io/)  

