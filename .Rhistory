filter(Year == 2023)
# join data
data23 <- left_join(long_cases_data_23, long_deaths_data_23,
by = c("Months", "Year"))
# bar charts for dengue cases in 2023
plot_ly(data = data23, x = ~Months) %>%
add_bars(y = ~Cases, name = 'Confirmed Cases') %>%
# Add other years similarly
layout(xaxis = list(title = 'Month'),
yaxis = list(title = 'Number of Confirmed Cases'))
# bar charts for dengue deaths in 2023
plot_ly(data = data23, x = ~Months) %>%
add_bars(y = ~Deaths, name = 'Confirmed Deaths', marker = list(color = 'red')) %>%
# Add other years similarly
layout(xaxis = list(title = 'Month'),
yaxis = list(title = 'Number of Death Cases'))
# Dengue Cases by year
plot_ly(data = dengue_cases, x = ~Months)  |>
add_bars(y = ~`2012`, name = '2012') |>
add_bars(y = ~`2013`, name = '2013') |>
add_bars(y = ~`2014`, name = '2014') |>
add_bars(y = ~`2015`, name = '2015') |>
add_bars(y = ~`2016`, name = '2016') |>
add_bars(y = ~`2017`, name = '2017') |>
add_bars(y = ~`2018`, name = '2018') |>
add_bars(y = ~`2019`, name = '2019') |>
add_bars(y = ~`2020`, name = '2020') |>
add_bars(y = ~`2021`, name = '2021') |>
add_bars(y = ~`2022`, name = '2022') |>
add_bars(y = ~`2023`, name = '2023') |>
layout(xaxis = list(title = 'Month'),
yaxis = list(title = 'Number of Confirmed Cases'))
# Dengue deaths by year
plot_ly(data = dengue_deaths, x = ~Months)  |>
add_bars(y = ~`2015`, name = '2015') |>
add_bars(y = ~`2016`, name = '2016') |>
add_bars(y = ~`2017`, name = '2017') |>
add_bars(y = ~`2018`, name = '2018') |>
add_bars(y = ~`2019`, name = '2019') |>
add_bars(y = ~`2020`, name = '2020') |>
add_bars(y = ~`2021`, name = '2021') |>
add_bars(y = ~`2022`, name = '2022') |>
add_bars(y = ~`2023`, name = '2023') |>
layout(xaxis = list(title = 'Month'),
yaxis = list(title = 'Number of Death Cases'))
# Create a line chart
plot_ly(data = dengue_cases, x = ~Months) %>%
add_trace(y = ~`2012`, name = '2012', type = 'scatter', mode = 'lines') %>%
add_trace(y = ~`2013`, name = '2013', type = 'scatter', mode = 'lines') %>%
# Add other years similarly
layout(title = 'Monthly Trends Over the Years',
xaxis = list(title = 'Month'),
yaxis = list(title = 'Value'))
# dashboard
library(flexdashboard)
library(tidyverse)
library(sjPlot)
library(viridis)
library(rio)
# Maps and Plots
library(plotly)
library(leaflet)
library(leafpop)
library(RColorBrewer)
# Dates
library(lubridate)
## For displaying tables
library(DT)
library(readxl)
theme_set(theme_classic())
confirmed <- format(sum(daily_data_23$Cases, na.rm = T), big.mark = ",")
valueBox(value = confirmed,
caption = "Total Confirmed Cases in 2023",
color = confirmed_color)
# dashboard
library(flexdashboard)
library(tidyverse)
library(readxl)
library(sjPlot)
library(viridis)
library(rio)
# Maps and Plots
library(plotly)
library(leaflet)
library(leafpop)
library(RColorBrewer)
# Dates
library(lubridate)
## For displaying tables
library(DT)
library(readxl)
theme_set(theme_classic())
dengue_cases <- read_excel(here::here("data/DengueCaseReporting[2012-23].xlsx"),sheet = 1)
# bar charts for dengue cases in 2023
plot_ly(data = data23, x = ~Months) %>%
add_bars(y = ~Cases, name = 'Confirmed Cases') %>%
# Add other years similarly
layout(xaxis = list(title = 'Month'),
yaxis = list(title = 'Number of Confirmed Cases'))
# bar charts for dengue cases in 2023
plot_ly(data = data23, x = ~Months) %>%
add_bars(y = ~Cases, name = 'Confirmed Cases') %>%
# Add other years similarly
layout(xaxis = list(title = 'Month'),
yaxis = list(title = 'Number of Confirmed Cases'))
plot_ly(data = daily_data_23, x = ~Date, type = 'scatter', mode = 'lines+markers',
name = 'Cases', y = ~Cases)
# bar charts for dengue cases in 2023
p1 <- plot_ly(data = data23, x = ~Months) %>%
add_bars(y = ~Cases, name = 'Confirmed Cases') %>%
# Add other years similarly
layout(xaxis = list(title = 'Month'),
yaxis = list(title = 'Number of Confirmed Cases'))
p2 <- plot_ly(data = daily_data_23, x = ~Date, type = 'scatter', mode = 'lines+markers',
name = 'Cases', y = ~Cases)
combined_chart <- subplot(p1, p2, nrows = 2)
combined_chart
# bar charts for dengue cases in 2023
fig <- plot_ly(data = data23, x = ~Months) %>%
add_bars(y = ~Cases, name = 'Confirmed Cases') %>%
# Add other years similarly
layout(xaxis = list(title = 'Month'),
yaxis = list(title = 'Number of Confirmed Cases'))
plot_ly(data = data23, x = ~Months) %>%
add_bars(y = ~Cases, name = 'Confirmed Cases') %>%
add_trace(data = daily_data_23, x = ~Date, type = 'scatter', mode = 'lines+markers',
name = 'Cases', y = ~Cases) |>
# Add other years similarly
layout(xaxis = list(title = 'Month'),
yaxis = list(title = 'Number of Confirmed Cases'))
plot_ly(data = data23, x = ~Months) %>%
add_bars(y = ~Cases, name = 'Confirmed Cases') %>%
# Add other years similarly
layout(xaxis = list(title = 'Month'),
yaxis = list(title = 'Number of Confirmed Cases'))
plot_ly(data = daily_data_23, x = ~Date, type = 'scatter', mode = 'lines+markers',
name = 'Cases', y = ~Cases)
plot_ly(data = data23, x = ~Months) %>%
add_bars(y = ~Cases, name = 'Confirmed Cases') %>%
add_lines(data = daily_data_23, x = ~Date, type = 'scatter', mode = 'lines+markers',
name = 'Cases', y = ~Cases) |>
# Add other years similarly
layout(xaxis = list(title = 'Month'),
yaxis = list(title = 'Number of Confirmed Cases'))
plot_ly(data = data23, x = ~Months) %>%
add_bars(y = ~Cases, name = 'Confirmed Cases') %>%
# Add other years similarly
layout(xaxis = list(title = 'Month'),
yaxis = list(title = 'Number of Confirmed Cases'))
plot_ly(data = data23, x = ~Months) %>%
add_bars(y = ~Cases, name = 'Confirmed Cases') %>%
add_trace(y = ~Cases, type = 'scatter', mode = 'lines+markers') |>
# Add other years similarly
layout(xaxis = list(title = 'Month'),
yaxis = list(title = 'Number of Confirmed Cases'))
# bar charts for dengue cases in 2023
plot_ly(data = data23, x = ~Months) %>%
add_bars(y = ~Cases, name = 'Number of Confirmed Cases') %>%
add_trace(y = ~Cases, type = 'scatter', mode = 'lines+markers', name = "Number of Cases Trend") |>
# Add other years similarly
layout(xaxis = list(title = 'Month'),
yaxis = list(title = 'Number of Confirmed Cases'))
plot_ly(data = data23, x = ~Months)  |>
add_bars(y = ~Cases, name = 'Number of Confirmed Cases') |>
add_trace(y = ~Cases, type = 'scatter', mode = 'lines+markers', name = "Number of Cases Trend") |>
# Add other years similarly
layout(xaxis = list(title = 'Month'),
yaxis = list(title = 'Number of Confirmed Cases'))
# bar charts for dengue cases in 2023
plot_ly(data = data23, x = ~Months)  |>
add_bars(y = ~Cases, name = 'Confirmed Cases') |>
add_trace(y = ~Cases, type = 'scatter', mode = 'lines+markers', name = "Trends") |>
# Add other years similarly
layout(xaxis = list(title = 'Month'),
yaxis = list(title = 'Number of Confirmed Cases'))
plot_ly(data = data23, x = ~Months) %>%
add_bars(y = ~Deaths, name = 'Confirmed Deaths', marker = list(color = 'red')) |>
add_trace(y = ~Deaths, type = 'scatter', mode = 'lines+markers', name = "Trends") |>
# Add other years similarly
layout(xaxis = list(title = 'Month'),
yaxis = list(title = 'Number of Death Cases'))
# bar charts for dengue deaths in 2023
plot_ly(data = data23, x = ~Months) %>%
add_bars(y = ~Deaths, name = 'Confirmed Deaths', marker = list(color = 'black')) |>
add_trace(y = ~Deaths, type = 'scatter', mode = 'lines+markers', name = "Trends") |>
# Add other years similarly
layout(xaxis = list(title = 'Month'),
yaxis = list(title = 'Number of Death Cases'))
# bar charts for dengue deaths in 2023
plot_ly(data = data23, x = ~Months) %>%
add_bars(y = ~Deaths, name = 'Confirmed Deaths', marker = list(color = 'black')) |>
add_trace(y = ~Deaths, type = 'scatter', mode = 'lines+markers', name = "Trends") |>
# Add other years similarly
layout(xaxis = list(title = 'Month'),
yaxis = list(title = 'Number of Death Cases'))
# join data
all_years <- left_join(long_cases_data, long_deaths_data,
by = c("Months", "Year"))
View(all_years)
# all years pattern
plot_ly(data = all_years, x = ~Date, type = 'scatter', mode = 'lines+markers',
name = 'Cases', y = ~Cases) %>%
add_trace(y = ~Deaths, name = 'Deaths') %>%
add_trace(y = ~Recovered, name = 'Recovered') %>%
layout(xaxis = list(title = 'Date'),
yaxis = list(title = 'Count'))
# all years pattern
plot_ly(data = all_years, x = ~Date, type = 'scatter', mode = 'lines+markers',
name = 'Cases', y = ~Cases) %>%
add_trace(y = ~Deaths, name = 'Deaths') %>%
layout(xaxis = list(title = 'Date'),
yaxis = list(title = 'Count'))
plot_ly(data = all_years, x = ~Moths, type = 'scatter', mode = 'lines+markers',
name = 'Cases', y = ~Cases) %>%
add_trace(y = ~Deaths, name = 'Deaths') %>%
layout(xaxis = list(title = 'Date'),
yaxis = list(title = 'Count'))
# all years pattern
plot_ly(data = all_years, x = ~Months) |>
add_trace(y = ~Deaths, type = 'scatter', mode = 'lines+markers', name = "Trends") |>
layout(xaxis = list(title = 'Month'),
yaxis = list(title = 'Number of Death Cases'))
# all years pattern
plot_ly(data = all_years, x = ~Months) |>
add_trace(y = ~Cases, type = 'scatter', mode = 'lines+markers', name = "Trends") |>
add_trace(y = ~Deaths, type = 'scatter', mode = 'lines+markers', name = "Trends") |>
layout(xaxis = list(title = 'Month'),
yaxis = list(title = 'Number of Death Cases'))
# all years pattern
plot_ly(data = all_years, x = ~Months) |>
add_trace(y = ~Cases, type = 'scatter', mode = 'lines+markers', name = "Confirmed Cases") |>
add_trace(y = ~Deaths, type = 'scatter', mode = 'lines+markers', name = "Deaths") |>
layout(xaxis = list(title = 'Month'),
yaxis = list(title = 'Number of Death Cases'))
# all years pattern
plot_ly(data = all_years, x = ~Year) |>
add_trace(y = ~Cases, type = 'scatter', mode = 'lines+markers', name = "Confirmed Cases") |>
add_trace(y = ~Deaths, type = 'scatter', mode = 'lines+markers', name = "Deaths") |>
layout(xaxis = list(title = 'Month'),
yaxis = list(title = 'Number of Death Cases'))
Months
# all years pattern
plot_ly(data = all_years, x = ~Months) |>
add_trace(y = ~Cases, type = 'scatter', mode = 'lines+markers', name = "Confirmed Cases") |>
add_trace(y = ~Deaths, type = 'scatter', mode = 'lines+markers', name = "Deaths") |>
layout(xaxis = list(title = 'Month'),
yaxis = list(title = 'Number of Death Cases'))
plot_ly(data = all_years, x = ~Months) |>
add_trace(y = ~Cases, type = 'scatter', mode = 'lines+markers', name = "Confirmed Cases") |>
add_trace(y = ~Deaths, type = 'scatter', mode = 'lines+markers', name = "Deaths") |>
layout(xaxis = list(title = 'Month'),
yaxis = list(title = 'Number of Death Cases'))
# all years pattern
plot_ly(data = all_years, x = ~Months) |>
add_trace(y = ~na.omit(Cases), type = 'scatter', mode = 'lines+markers', name = "Confirmed Cases") |>
add_trace(y = ~Deaths, type = 'scatter', mode = 'lines+markers', name = "Deaths") |>
layout(xaxis = list(title = 'Month'),
yaxis = list(title = 'Number of Death Cases'))
# all years pattern
plot_ly(data = all_years, x = ~Months) |>
add_trace(y = ~na.omit(Cases), type = 'scatter', mode = 'lines+markers', name = "Confirmed Cases") |>
add_trace(y = ~na.omit(Deaths), type = 'scatter', mode = 'lines+markers', name = "Deaths") |>
layout(xaxis = list(title = 'Month'),
yaxis = list(title = 'Number of Death Cases'))
Cases
# all years pattern
plot_ly(data = all_years, x = ~Months) |>
add_trace(y = ~Cases, type = 'scatter', mode = 'lines+markers', name = "Confirmed Cases") |>
add_trace(y = ~Deaths, type = 'scatter', mode = 'lines+markers', name = "Deaths") |>
layout(xaxis = list(title = 'Month'),
yaxis = list(title = 'Number of Death Cases'))
# all years pattern
na.omit(all_years)
plot_ly(data = all_years, x = ~Months) |>
add_trace(y = ~Cases, type = 'scatter', mode = 'lines+markers', name = "Confirmed Cases") |>
add_trace(y = ~Deaths, type = 'scatter', mode = 'lines+markers', name = "Deaths") |>
layout(xaxis = list(title = 'Month'),
yaxis = list(title = 'Number of Death Cases'))
na.omit(all_years)
plot_ly(data = all_years, x = ~Months) |>
add_trace(y = ~Cases, type = 'scatter', mode = 'lines+markers', name = "Confirmed Cases") |>
add_trace(y = ~Deaths, type = 'scatter', mode = 'lines+markers', name = "Deaths") |>
layout(xaxis = list(title = 'Month'),
yaxis = list(title = 'Number of Death Cases'))
# all years pattern
plot_ly(data = all_years, x = ~Months) |>
add_trace(y = ~Cases, type = 'scatter', mode = 'lines+markers', name = "Confirmed Cases") |>
add_trace(y = ~Deaths, type = 'scatter', mode = 'lines+markers', name = "Deaths") |>
layout(xaxis = list(title = 'Month'),
yaxis = list(title = 'Number of Death Cases'))
all_years |>
group_by(Year) |>
plot_ly(data = all_years, x = ~Months) |>
add_trace(y = ~Cases, type = 'scatter', mode = 'lines+markers', name = "Confirmed Cases") |>
add_trace(y = ~Deaths, type = 'scatter', mode = 'lines+markers', name = "Deaths") |>
layout(xaxis = list(title = 'Month'),
yaxis = list(title = 'Number of Death Cases'))
# all years pattern
fig <- all_years |>
group_by(Year) |>
plot_ly(data = all_years, x = ~Months) |>
add_trace(y = ~Cases, type = 'scatter', mode = 'lines+markers', name = "Confirmed Cases") |>
add_trace(y = ~Deaths, type = 'scatter', mode = 'lines+markers', name = "Deaths") |>
layout(xaxis = list(title = 'Month'),
yaxis = list(title = 'Number of Death Cases'))
fig
# all years pattern
plot_ly(data = all_years, x = ~Months) |>
add_trace(y = ~Cases, type = 'scatter', mode = 'lines+markers', name = "Confirmed Cases") |>
add_trace(y = ~Deaths, type = 'scatter', mode = 'lines+markers', name = "Deaths") |>
layout(xaxis = list(title = 'Month'),
yaxis = list(title = 'Number of Death Cases'))
dengue_cases |>
mutate(Months = factor(Months, levels = month.name))
plot_ly(data = dengue_cases, x = ~Months)  |>
add_bars(y = ~`2012`, name = '2012') |>
add_bars(y = ~`2013`, name = '2013') |>
add_bars(y = ~`2014`, name = '2014') |>
add_bars(y = ~`2015`, name = '2015') |>
add_bars(y = ~`2016`, name = '2016') |>
add_bars(y = ~`2017`, name = '2017') |>
add_bars(y = ~`2018`, name = '2018') |>
add_bars(y = ~`2019`, name = '2019') |>
add_bars(y = ~`2020`, name = '2020') |>
add_bars(y = ~`2021`, name = '2021') |>
add_bars(y = ~`2022`, name = '2022') |>
add_bars(y = ~`2023`, name = '2023') |>
layout(xaxis = list(title = 'Month'),
yaxis = list(title = 'Number of Confirmed Cases'))
# Dengue Cases by year
x <- dengue_cases |>
mutate(Months = factor(Months, levels = month.name))
# Dengue Cases by year
xx <- dengue_cases |>
mutate(Months = factor(Months, levels = month.name))
plot_ly(data = xx, x = ~Months)  |>
add_bars(y = ~`2012`, name = '2012') |>
add_bars(y = ~`2013`, name = '2013') |>
add_bars(y = ~`2014`, name = '2014') |>
add_bars(y = ~`2015`, name = '2015') |>
add_bars(y = ~`2016`, name = '2016') |>
add_bars(y = ~`2017`, name = '2017') |>
add_bars(y = ~`2018`, name = '2018') |>
add_bars(y = ~`2019`, name = '2019') |>
add_bars(y = ~`2020`, name = '2020') |>
add_bars(y = ~`2021`, name = '2021') |>
add_bars(y = ~`2022`, name = '2022') |>
add_bars(y = ~`2023`, name = '2023') |>
layout(xaxis = list(title = 'Month'),
yaxis = list(title = 'Number of Confirmed Cases'))
View(dengue_cases)
plot_ly(data = all_years, x = ~Months) |>
add_trace(y = ~Cases, type = 'scatter', mode = 'lines+markers', name = "Confirmed Cases") |>
add_trace(y = ~Deaths, type = 'scatter', mode = 'lines+markers', name = "Deaths") |>
layout(xaxis = list(title = 'Month'),
yaxis = list(title = 'Number of Death Cases'))
plot_ly(data = daily_data_23, x = ~Date, type = 'scatter', mode = 'lines+markers',
name = 'Cases', y = ~Cases) %>%
add_trace(y = ~Deaths, name = 'Deaths', color = "red") %>%
add_trace(y = ~Recovered, name = 'Recovered') %>%
layout(xaxis = list(title = 'Date'),
yaxis = list(title = 'Count'))
plot_ly(data = daily_data_23, x = ~Date, type = 'scatter', mode = 'lines+markers',
name = 'Cases', y = ~Cases) %>%
add_trace(y = ~Deaths, name = 'Deaths', line = list(color="red")) %>%
add_trace(y = ~Recovered, name = 'Recovered') %>%
layout(xaxis = list(title = 'Date'),
yaxis = list(title = 'Count'))
# Daily dengue pattern
# Create a time series line plot
plot_ly(data = daily_data_23, x = ~Date, type = 'scatter', mode = 'lines+markers',
name = 'Cases', y = ~Cases) %>%
add_trace(y = ~Deaths, name = 'Deaths', line = list(color="black")) %>%
add_trace(y = ~Recovered, name = 'Recovered') %>%
layout(xaxis = list(title = 'Date'),
yaxis = list(title = 'Count'))
View(all_years)
line_chart <- plot_ly(data = all_years, x = ~Date, type = 'scatter', mode = 'lines', name = 'Cases', y = ~Cases) %>%
add_trace(y = ~Deaths, name = 'Deaths') %>%
subplot(nrows = 2, shareX = TRUE) %>%
layout(title = 'Monthly Trend of Cases and Deaths by Year',
xaxis = list(title = 'Date'),
yaxis = list(title = 'Count'))
line_chart <- plot_ly(data = all_years, x = ~Months, type = 'scatter', mode = 'lines', name = 'Cases', y = ~Cases) %>%
add_trace(y = ~Deaths, name = 'Deaths') %>%
layout(title = 'Monthly Trend of Cases and Deaths by Year',
xaxis = list(title = 'Date'),
yaxis = list(title = 'Count'))
line_chart
# Create a bar chart to show the yearly sum of cases and deaths
bar_chart <- plot_ly(data = all_years, x = ~Year, y = ~Cases, type = 'bar', name = 'Cases') %>%
add_trace(y = ~Deaths, name = 'Deaths') %>%
layout(title = 'Yearly Sum of Cases and Deaths',
xaxis = list(title = 'Year'),
yaxis = list(title = 'Count'))
bar_chart
bar_chart <- plot_ly(data = all_years, x = ~Year, y = ~Cases, type = 'scatter', name = 'Cases') %>%
add_trace(y = ~Deaths, name = 'Deaths') %>%
layout(title = 'Yearly Sum of Cases and Deaths',
xaxis = list(title = 'Year'),
yaxis = list(title = 'Count'))
bar_chart
bar_chart <- plot_ly(data = all_years, x = ~Year, y = ~Cases, type = 'bar', name = 'Cases') %>%
add_trace(y = ~Deaths, name = 'Deaths') %>%
layout(title = 'Yearly Sum of Cases and Deaths',
xaxis = list(title = 'Year'),
yaxis = list(title = 'Count'))
# Create a bar chart to show the yearly sum of cases and deaths
bar_chart <- plot_ly(data = all_years, x = ~Year, y = ~Cases, type = 'bar', name = 'Cases') %>%
add_trace(y = ~Deaths, name = 'Deaths') %>%
layout(title = 'Yearly Sum of Cases and Deaths',
xaxis = list(title = 'Year'),
yaxis = list(title = 'Count'))
bar_chart
line_chart <- plot_ly(data = all_years, x = ~Months, type = 'scatter', mode = 'lines', name = 'Cases', y = ~Cases) %>%
add_trace(y = ~Deaths, name = 'Deaths') %>%
layout(title = 'Monthly Trend of Cases and Deaths by Year',
xaxis = list(title = 'Date'),
yaxis = list(title = 'Count'))
line_chart
line_chart
# all years pattern
# Create a bar chart to show the yearly sum of cases and deaths
bar_chart <- plot_ly(data = all_years, x = ~Year, y = ~Cases, type = 'bar', name = 'Cases') %>%
add_trace(y = ~Deaths, name = 'Deaths') %>%
layout(title = 'Yearly Sum of Cases and Deaths',
xaxis = list(title = 'Year'),
yaxis = list(title = 'Count'))
# all years pattern
# Create a bar chart to show the yearly sum of cases and deaths
plot_ly(data = all_years, x = ~Year, y = ~Cases, type = 'bar', name = 'Cases') %>%
add_trace(y = ~Deaths, name = 'Deaths') %>%
layout(title = 'Yearly Sum of Cases and Deaths',
xaxis = list(title = 'Year'),
yaxis = list(title = 'Count'))
plot_ly(data = all_years, x = ~Year, y = ~Cases, type = 'bar', name = 'Cases') %>%
add_trace(y = ~Deaths, name = 'Deaths') %>%
layout(xaxis = list(title = 'Year'),
yaxis = list(title = 'Cases'))
install.packages("webshot")
webshot::webshot("index.hmlt", "4sept_update.png")
webshot::install_phantomjs()
webshot::webshot("index.hmlt", "4sept_update.png")
webshot::install_phantomjs(force = T)
webshot::webshot("index.hmlt", "4sept_update.png")
install.packages(c("askpass", "dplyr"))
webshot::webshot("index.hmlt", "4sept_update.png")
webshot::install_phantomjs()
install.packages("webshot")
install.packages("webshot")
webshot::install_phantomjs()
webshot::install_phantomjs(force = T)
install.packages(c("askpass", "dplyr"))
webshot::webshot("index.hmlt", "updated.png")
Sys.setenv(OPENSSL_CONF="/dev/null")
webshot::webshot("index.hmlt", "updated.png")
## ---- packages
library(denguedatahub)
library(tsibbletalk)
library(tsibble)
library(lubridate)
library(tidyverse)
library(magrittr)
library(feasts)
#devtools::install_github("thiyangt/ceylon")
library(ceylon)
## ---- tsibbletalk
data(srilanka_weekly_data)
# code the data to province
srilanka_weekly_data <- srilanka_weekly_data %>%
mutate(Province = case_when(
district %in% c("Colombo", "Gampaha", "Kalutara") ~ "Western",
district %in% c("Kandy", "Matale", "NuwaraEliya") ~ "Central",
district %in% c("Galle","Hambanthota", "Matara") ~ "Southern",
district %in% c("Jaffna", "Kilinochchi", "Mannar", "Vavuniya", "Mullaitivu" ) ~ "Nothern",
district %in% c("Batticaloa", "Ampara", "Trincomalee", "Kalmune") ~ "Eastern",
district %in% c("Kurunegala", "Puttalam") ~ "North Western",
district %in% c("Anuradhapura", "Polonnaruwa") ~ "North Central",
district %in% c("Badulla", "Monaragala") ~ "Uva",
district %in% c("Ratnapura", "Kegalle") ~ "Sabaragamuwa"
))
srilanka_weekly_data$yw <- yearweek(srilanka_weekly_data$start.date)
srilanka_weekly_data_tsibble <- srilanka_weekly_data %>%
tsibble(index = "yw",
key= c("district", "Province"), value = "cases")
dh_shared <- srilanka_weekly_data_tsibble %>%
as_shared_tsibble(spec = (Province/district))
p0 <- plotly_key_tree(dh_shared, height = 800, width = 1000)
# packages
library(tidyverse)
library(denguedatahub)
library(lubridate)
library(plotly)
# data
data <- readxl::read_excel(here::here("data/DengueCaseReporting[2012-23].xlsx"))
# data
data <- readxl::read_excel(here::here("data/DengueCaseReporting[2012-23].xlsx"),
sheet = 1)
View(data)
dengue_cases <- readxl::read_excel(here::here("data/DengueCaseReporting[2012-23].xlsx"),
sheet = 1)
# cases
long_cases_data <- dengue_cases |>
pivot_longer(cols = 2:13, names_to = "Year", values_to = "Cases") |>
mutate(Months = factor(Months, levels = month.name))
View(long_cases_data)
p1 <- long_cases_data %>%
ggplot(aes(x = Year, y = Cases)) +
geom_line(aes(group = Year),
alpha = 0.5) +
xlab("Time") + ylab("Cases")
p1
